<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:mp="http://typo3.org/ns/AawTeam/Minipoll/ViewHelpers"
      data-namespace-typo3-fluid="true">

<div class="tx_minipoll-svgpiechart">
    <svg id="tx_minipoll-svgpiechart{poll.uid}" width="{results.width}" height="{results.height}" xmlns="http://www.w3.org/2000/svg" viewBox="{results.viewbox}">
        <title>{poll.title}</title>
        <desc>Piechart results for the poll</desc>
        <f:for each="{results.slices}" as="slice">
            <g class="slice slice{slice.id} {slice.class}" data-tooltipvalue="{mp:format.voteCount(value:slice.votes)}">
                <f:switch expression="{slice.type}">
                    <f:case value="circle">
                        <circle cx="{slice.centerX}" cy="{slice.centerY}" r="{slice.radius}" fill="{slice.fill}"/>
                    </f:case>
                    <f:case value="path">
                        <path fill="{slice.fill}" d="{slice.d}" />
                    </f:case>
                    <f:f:defaultCase>
                        <path fill="{slice.fill}" d="{slice.d}" />
                    </f:f:defaultCase>
                </f:switch>
                <text x="{slice.centerX}" y="{slice.centerY}" text-anchor="middle" transform="translate(0 5)"><mp:format.voteCount round="1" percent="1">{slice.percent}</mp:format.voteCount></text>
            </g>
        </f:for>
    </svg>
    <f:if condition="{results.includeTooltipJs}">
        <div class="tx_minipoll-svgpiechart-tooltip"></div>
    </f:if>
</div>

</html>
